<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#667eea">
    <meta name="description" content="–ö–∞–ª–µ–Ω–¥–∞—Ä—å —É—Ö–æ–¥–∞ –∑–∞ –º—É—Ä–∞–≤—å—è–º–∏-–∂–Ω–µ—Ü–∞–º–∏ Messor structor">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Messor structor">
    <meta name="mobile-web-app-capable" content="yes">
    
    <title>üêú Messor structor - –ö–∞–ª–µ–Ω–¥–∞—Ä—å —É—Ö–æ–¥–∞</title>
    
    <!-- –ò–∫–æ–Ω–∫–∏ (–º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –Ω–∞ https://favicon.io/) -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üêú</text></svg>">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üêú</text></svg>">

    
    <!-- –ú–∞–Ω–∏—Ñ–µ—Å—Ç -->
    <link rel="manifest" href="manifest.json">
    
    <style>
        /* [–í—Å–µ CSS —Å—Ç–∏–ª–∏ –æ—Å—Ç–∞—é—Ç—Å—è –ë–ï–ó –ò–ó–ú–ï–ù–ï–ù–ò–ô –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –æ—Ç–≤–µ—Ç–∞] */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 10px;
            min-height: 100vh;
            overflow-x: hidden;
            -webkit-tap-highlight-color: transparent;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
            position: relative;
        }

        .header {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 25px 20px;
            text-align: center;
            position: relative;
        }

        .install-button {
            position: absolute;
            top: 15px;
            right: 15px;
            background: white;
            color: #667eea;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            display: none;
            z-index: 100;
        }

        .install-button.visible {
            display: block;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .header h1 {
            font-size: 1.8em;
            margin-bottom: 8px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .header p {
            font-size: 0.95em;
            opacity: 0.9;
        }

        /* [–û–°–¢–ê–õ–¨–ù–´–ï –°–¢–ò–õ–ò –ë–ï–ó –ò–ó–ú–ï–ù–ï–ù–ò–ô] */
        .controls {
            background: #f8f9fa;
            padding: 15px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            align-items: center;
            justify-content: center;
            border-bottom: 2px solid #e9ecef;
        }

        .month-selector {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            font-size: 0.95em;
            cursor: pointer;
            transition: transform 0.2s;
            font-weight: 600;
            touch-action: manipulation;
        }

        button:active {
            transform: scale(0.95);
        }

        .current-month {
            font-size: 1.2em;
            font-weight: bold;
            color: #667eea;
            min-width: 160px;
            text-align: center;
        }

        .content {
            padding: 15px;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 6px;
            margin-bottom: 20px;
            width: 100%;
        }

        .day-header {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 10px 5px;
            text-align: center;
            font-weight: bold;
            border-radius: 8px;
            font-size: 0.85em;
        }

        .day-card {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            padding: 6px;
            min-height: 110px;
            transition: all 0.2s;
            cursor: pointer;
            width: 100%;
            touch-action: manipulation;
            position: relative;
            overflow: hidden;
        }

        .day-card:active {
            transform: scale(0.98);
        }

        .day-card.completed {
            background: linear-gradient(135deg, #d4fc79 0%, #96e6a1 100%);
            border-color: #52c41a;
        }

        .day-card.empty {
            background: #e9ecef;
            opacity: 0.4;
            cursor: default;
        }

        .day-card.today {
            border-color: #667eea;
            box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.2);
        }

        .day-number {
            font-size: 1.1em;
            font-weight: bold;
            color: #495057;
            margin-bottom: 6px;
        }

        .day-card.completed .day-number {
            color: #237804;
        }

        .task-list {
            font-size: 0.7em;
            color: #666;
            line-height: 1.3;
        }

        .task-item {
            padding: 2px 0;
            display: flex;
            align-items: center;
        }

        .task-item:before {
            content: "‚ñ°";
            margin-right: 4px;
            font-size: 1.1em;
            color: #999;
        }

        .day-card.completed .task-item:before {
            content: "‚úì";
            color: #52c41a;
            font-weight: bold;
        }

        .info-box {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .info-box h3 {
            color: #333;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .info-item {
            display: flex;
            align-items: center;
            margin: 6px 0;
            font-size: 0.9em;
        }

        .info-icon {
            margin-right: 8px;
            font-size: 1.2em;
        }

        .seasonal-info {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .seasonal-info h3 {
            color: #333;
            margin-bottom: 8px;
            font-size: 1.1em;
        }

        .tips-box {
            background: linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%);
            border-radius: 12px;
            padding: 15px;
            margin-top: 15px;
        }

        .tips-box h3 {
            color: #333;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .tips-box ul {
            list-style: none;
            padding-left: 0;
        }

        .tips-box li {
            padding: 4px 0;
            color: #555;
            font-size: 0.85em;
            line-height: 1.4;
        }

        .tips-box li:before {
            content: "‚úì ";
            color: #e17055;
            font-weight: bold;
            margin-right: 6px;
        }

        .warning-box {
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .warning-box h3 {
            color: #c23616;
            margin-bottom: 8px;
            font-size: 1.1em;
        }

        .warning-box p {
            color: #444;
            font-size: 0.9em;
            line-height: 1.4;
        }

        @media print {
            body {
                background: white !important;
                padding: 0 !important;
            }
            .container {
                box-shadow: none !important;
            }
            .controls, .install-button {
                display: none !important;
            }
            .day-card {
                page-break-inside: avoid;
                border: 1px solid #ccc !important;
            }
        }

        @media (min-width: 768px) {
            .calendar-grid {
                gap: 10px;
            }
            
            .day-card {
                min-height: 130px;
                padding: 10px;
            }

            .task-list {
                font-size: 0.75em;
            }

            .day-number {
                font-size: 1.3em;
            }

            .content {
                padding: 20px;
            }
        }

        @media (max-width: 767px) {
            .header h1 {
                font-size: 1.4em;
            }

            .current-month {
                font-size: 1em;
                min-width: 130px;
            }

            button {
                padding: 8px 15px;
                font-size: 0.85em;
            }

            .day-header {
                font-size: 0.75em;
                padding: 8px 2px;
            }

            .day-card {
                min-height: 100px;
            }
        }

        @media (display-mode: standalone) {
            body {
                padding-top: env(safe-area-inset-top);
                padding-bottom: env(safe-area-inset-bottom);
            }
            
            .install-button {
                display: none !important;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <button class="install-button" id="installButton">üì± –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</button>
            <h1>üêú Messor structor - –ö–∞–ª–µ–Ω–¥–∞—Ä—å —É—Ö–æ–¥–∞ üêú</h1>
            <p>–°—Ç–µ–ø–Ω—ã–µ –º—É—Ä–∞–≤—å–∏-–∂–Ω–µ—Ü—ã</p>
        </div>

        <div class="controls">
            <div class="month-selector">
                <button onclick="changeMonth(-1)">‚óÄ –ù–∞–∑–∞–¥</button>
                <div class="current-month" id="currentMonth"></div>
                <button onclick="changeMonth(1)">–í–ø–µ—Ä–µ–¥ ‚ñ∂</button>
            </div>
            <button onclick="resetMonth()">üîÑ –°–±—Ä–æ—Å–∏—Ç—å –º–µ—Å—è—Ü</button>
            <button onclick="window.print()">üñ®Ô∏è –ü–µ—á–∞—Ç—å</button>
            <button onclick="location.reload()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
        </div>

        <div class="content">
            <!-- [–í–µ—Å—å –∫–æ–Ω—Ç–µ–Ω—Ç –∫–∞–ª–µ–Ω–¥–∞—Ä—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π] -->
            <div class="info-box">
                <h3>üìã –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏:</h3>
                <div class="info-item">
                    <span class="info-icon">üëÄ</span>
                    <span>–í–∏–∑—É–∞–ª—å–Ω—ã–π –æ—Å–º–æ—Ç—Ä –∫–æ–ª–æ–Ω–∏–∏ –∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</span>
                </div>
                <div class="info-item">
                    <span class="info-icon">üé®</span>
                    <span>–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–≤–µ—Ç–∞ –≥–∏–ø—Å–∞ –∏ –ø–æ–≤–µ–¥–µ–Ω–∏—è –º—É—Ä–∞–≤—å–µ–≤</span>
                </div>
            </div>

            <div class="info-box" style="background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);">
                <h3>üíß –£–≤–ª–∞–∂–Ω–µ–Ω–∏–µ (—Ä–∞–∑ –≤ 7-14 –¥–Ω–µ–π):</h3>
                <div class="info-item">
                    <span class="info-icon">üí¶</span>
                    <span><strong>6 –º–ª –≤–æ–¥—ã</strong> –≤ –æ–∫–æ—à–∫–æ –¥–ª—è —É–≤–ª–∞–∂–Ω–µ–Ω–∏—è</span>
                </div>
                <div class="info-item" style="font-size: 0.85em; margin-left: 35px;">
                    –û—Ä–∏–µ–Ω—Ç–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ —Ü–≤–µ—Ç –≥–∏–ø—Å–∞: —Ç—ë–º–Ω—ã–π = –≤–ª–∞–∂–Ω—ã–π ‚úì, —Å–≤–µ—Ç–ª—ã–π = –ø–æ—Ä–∞ –ø–æ–ª–∏–≤–∞—Ç—å
                </div>
            </div>

            <div class="warning-box">
                <h3>‚ö†Ô∏è –í–ê–ñ–ù–û –¥–ª—è Messor structor:</h3>
                <p><strong>–ù–ò–ö–û–ì–î–ê –Ω–µ –¥–∞–≤–∞–π—Ç–µ —Å–∏—Ä–æ–ø –∏–ª–∏ —Å–∞—Ö–∞—Ä–Ω—É—é –≤–æ–¥—É!</strong> –ñ–Ω–µ—Ü—ã –ø–æ–ª—É—á–∞—é—Ç –≤—Å–µ —É–≥–ª–µ–≤–æ–¥—ã –∏–∑ —Å–µ–º—è–Ω. –°–∏—Ä–æ–ø –¥–ª—è –Ω–∏—Ö –≤—Ä–µ–¥–µ–Ω –∏ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –≥–∏–±–µ–ª–∏ –∫–æ–ª–æ–Ω–∏–∏.</p>
            </div>

            <div class="seasonal-info" id="seasonalInfo"></div>

            <div id="calendar" class="calendar-grid"></div>

            <div class="tips-box">
                <h3>üí° –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∫–æ—Ä–º–ª–µ–Ω–∏–µ Messor structor:</h3>
                <ul>
                    <li><strong>–°–µ–º–µ–Ω–∞ (–ø–æ—Å—Ç–æ—è–Ω–Ω–æ):</strong> –ü—Ä–æ—Å–æ, –º–∞–∫, —Ä–∞–ø—Å, –∫–∞–Ω–∞—Ä–µ–µ—á–Ω—ã–π –∫–æ—Ä–º, —Å–µ–º–µ–Ω–∞ —Ç—ã–∫–≤—ã –∏ –ø–æ–¥—Å–æ–ª–Ω–µ—á–Ω–∏–∫–∞ (–æ—á–∏—â–µ–Ω–Ω—ã–µ). –î–∞–≤–∞—Ç—å –∫–æ–≥–¥–∞ –∑–∞–ø–∞—Å—ã –∫–æ–Ω—á–∏–ª–∏—Å—å</li>
                    <li><strong>–ë–µ–ª–æ–∫ (2-3 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é):</strong> –ú—ë—Ä—Ç–≤—ã–µ –Ω–∞—Å–µ–∫–æ–º—ã–µ (—Å–≤–µ—Ä—á–∫–∏, –º—É—á–Ω—ã–µ —á–µ—Ä–≤–∏, —Ç–∞—Ä–∞–∫–∞–Ω—ã), –≥–∞–º–º–∞—Ä—É—Å</li>
                    <li><strong>–£–≤–ª–∞–∂–Ω–µ–Ω–∏–µ (—Ä–∞–∑ –≤ 7-14 –¥–Ω–µ–π):</strong> 6 –º–ª –≤–æ–¥—ã –≤ –æ–∫–æ—à–∫–æ. –°–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ —Ü–≤–µ—Ç –≥–∏–ø—Å–∞: —Ç—ë–º–Ω—ã–π = —Ö–æ—Ä–æ—à–æ, —Å–≤–µ—Ç–ª—ã–π = –ø–æ—Ä–∞ –ø–æ–ª–∏–≤–∞—Ç—å</li>
                    <li><strong>–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞:</strong> 23-30¬∞C –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ, 25-28¬∞C –∏–¥–µ–∞–ª—å–Ω–æ –¥–ª—è —Ä–æ—Å—Ç–∞</li>
                    <li><strong>–ó–∏–º–æ–≤–∫–∞ –ù–ï –¢–†–ï–ë–£–ï–¢–°–Ø!</strong> –ú–æ–≥—É—Ç –∑–∞–º–µ–¥–ª–∏—Ç—å—Å—è –Ω–∞ –º–µ—Å—è—Ü –ø—Ä–∏ 15-20¬∞C, –Ω–æ —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ</li>
                    <li><strong>–£–±–æ—Ä–∫–∞:</strong> –£–±–∏—Ä–∞–π—Ç–µ –±–µ–ª–∫–æ–≤—É—é –ø–∏—â—É —á–µ—Ä–µ–∑ 1-2 –¥–Ω—è, —Å–µ–º–µ–Ω–∞ –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏</li>
                    <li>–ù–∞–∂–∏–º–∞–π—Ç–µ –Ω–∞ –¥–µ–Ω—å –¥–ª—è –æ—Ç–º–µ—Ç–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á ‚úì</li>
                </ul>
            </div>

            <div class="tips-box" style="background: linear-gradient(135deg, #e0c3fc 0%, #8ec5fc 100%);">
                <h3>üî¨ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ Messor structor:</h3>
                <ul>
                    <li>–†–∞–∑–≤–∏—Ç—ã–π –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º: —Ä–∞–±–æ—á–∏–µ 3-5–º–º, —Å–æ–ª–¥–∞—Ç—ã 5-9–º–º, –º–∞—Ç–∫–∞ 11-12–º–º</li>
                    <li>–°–æ–ª–¥–∞—Ç—ã –ø–æ—è–≤—è—Ç—Å—è –ø—Ä–∏ —Ö–æ—Ä–æ—à–µ–º –±–µ–ª–∫–æ–≤–æ–º –∫–æ—Ä–º–ª–µ–Ω–∏–∏</li>
                    <li>–ú–µ–¥–ª–∏—Ç–µ–ª—å–Ω—ã –∏ –Ω–µ–∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã - –ª–µ–≥–∫–æ –Ω–∞–±–ª—é–¥–∞—Ç—å</li>
                    <li>–ü–µ—Ä–µ–º–∞–ª—ã–≤–∞—é—Ç —Å–µ–º–µ–Ω–∞ –≤ "–º—É–∫—É" - —Å–ª–µ–¥–∏—Ç–µ –∑–∞ –µ—ë –Ω–∞–ª–∏—á–∏–µ–º –≤ –≥–Ω–µ–∑–¥–µ</li>
                    <li>–ú–∞—Ç–∫–∞ –º–æ–∂–µ—Ç –∂–∏—Ç—å 20-25 –ª–µ—Ç –ø—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º —É—Ö–æ–¥–µ!</li>
                    <li>–ö–æ–ª–æ–Ω–∏—è –º–æ–∂–µ—Ç –≤—ã—Ä–∞—Å—Ç–∏ –¥–æ 1000+ –æ—Å–æ–±–µ–π –∑–∞ –ø–µ—Ä–≤—ã–π –≥–æ–¥</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // ==================== –û–°–ù–û–í–ù–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï ====================
        let currentDate = new Date();
        let completedDays = {};
        let deferredPrompt = null;
        let isPWAInstalled = false;

        const monthNames = [
            '–Ø–Ω–≤–∞—Ä—å', '–§–µ–≤—Ä–∞–ª—å', '–ú–∞—Ä—Ç', '–ê–ø—Ä–µ–ª—å', '–ú–∞–π', '–ò—é–Ω—å',
            '–ò—é–ª—å', '–ê–≤–≥—É—Å—Ç', '–°–µ–Ω—Ç—è–±—Ä—å', '–û–∫—Ç—è–±—Ä—å', '–ù–æ—è–±—Ä—å', '–î–µ–∫–∞–±—Ä—å'
        ];

        const dayNames = ['–ü–Ω', '–í—Ç', '–°—Ä', '–ß—Ç', '–ü—Ç', '–°–±', '–í—Å'];

        const seasonalInfo = {
            0: { season: '–ó–∏–º–∞', icon: '‚ùÑÔ∏è', text: '–ñ–Ω–µ—Ü—ã –º–æ–≥—É—Ç –∑–∞–º–µ–¥–ª–∏—Ç—å—Å—è, –Ω–æ –∑–∏–º–æ–≤–∫–∞ –ù–ï –ù–£–ñ–ù–ê. –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ 20-25¬∞C. –ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –∫–æ—Ä–º–∏—Ç—å –∫–∞–∫ –æ–±—ã—á–Ω–æ.' },
            1: { season: '–ó–∏–º–∞', icon: '‚ùÑÔ∏è', text: '–í–æ–∑–º–æ–∂–Ω–∞ –∫—Ä–∞—Ç–∫–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –¥–∏–∞–ø–∞—É–∑–∞ –¥–æ –º–µ—Å—è—Ü–∞. –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ! –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ 20-25¬∞C.' },
            2: { season: '–í–µ—Å–Ω–∞', icon: 'üå∏', text: '–ù–∞—á–∞–ª–æ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Å–µ–∑–æ–Ω–∞. –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ 25-28¬∞C. –£–≤–µ–ª–∏—á—å—Ç–µ –±–µ–ª–∫–æ–≤–æ–µ –∫–æ—Ä–º–ª–µ–Ω–∏–µ.' },
            3: { season: '–í–µ—Å–Ω–∞', icon: 'üå∏', text: '–ê–∫—Ç–∏–≤–Ω—ã–π —Ä–æ—Å—Ç –∫–æ–ª–æ–Ω–∏–∏. –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ 25-28¬∞C. –û–±–∏–ª—å–Ω–æ–µ –∫–æ—Ä–º–ª–µ–Ω–∏–µ –±–µ–ª–∫–æ–º –∏ —Å–µ–º–µ–Ω–∞–º–∏.' },
            4: { season: '–í–µ—Å–Ω–∞', icon: 'üå∏', text: '–ü–∏–∫ –≤–µ—Å–µ–Ω–Ω–µ–≥–æ —Ä–æ—Å—Ç–∞. –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ 25-28¬∞C. –°–ª–µ–¥–∏—Ç–µ –∑–∞ –∑–∞–ø–∞—Å–∞–º–∏ —Å–µ–º—è–Ω.' },
            5: { season: '–õ–µ—Ç–æ', icon: '‚òÄÔ∏è', text: '–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å! –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ 25-30¬∞C. –û–±–∏–ª—å–Ω–æ–µ –∫–æ—Ä–º–ª–µ–Ω–∏–µ, —Å–ª–µ–¥–∏—Ç–µ –∑–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º.' },
            6: { season: '–õ–µ—Ç–æ', icon: '‚òÄÔ∏è', text: '–ü–∏–∫ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏ —Ä–æ—Å—Ç–∞. –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ 25-30¬∞C. –ú–Ω–æ–≥–æ –±–µ–ª–∫–∞ –¥–ª—è —Å–æ–ª–¥–∞—Ç.' },
            7: { season: '–õ–µ—Ç–æ', icon: '‚òÄÔ∏è', text: '–í—ã—Å–æ–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å. –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ 25-30¬∞C. –†–µ–≥—É–ª—è—Ä–Ω–æ–µ –±–µ–ª–∫–æ–≤–æ–µ –∫–æ—Ä–º–ª–µ–Ω–∏–µ.' },
            8: { season: '–û—Å–µ–Ω—å', icon: 'üçÇ', text: '–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è. –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ 23-28¬∞C. –ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –æ–±—ã—á–Ω–æ–µ –∫–æ—Ä–º–ª–µ–Ω–∏–µ.' },
            9: { season: '–û—Å–µ–Ω—å', icon: 'üçÇ', text: '–ù–æ—Ä–º–∞–ª—å–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å. –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ 23-28¬∞C. –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ä–µ–∂–∏–º –∫–æ—Ä–º–ª–µ–Ω–∏—è.' },
            10: { season: '–û—Å–µ–Ω—å', icon: 'üçÇ', text: '–í–æ–∑–º–æ–∂–Ω–æ –Ω–µ–±–æ–ª—å—à–æ–µ –∑–∞–º–µ–¥–ª–µ–Ω–∏–µ. –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ 20-25¬∞C. –û–±—ã—á–Ω–æ–µ –∫–æ—Ä–º–ª–µ–Ω–∏–µ.' },
            11: { season: '–ó–∏–º–∞', icon: '‚ùÑÔ∏è', text: '–ñ–Ω–µ—Ü—ã –º–æ–≥—É—Ç –∑–∞–º–µ–¥–ª–∏—Ç—å—Å—è –Ω–∞ –º–µ—Å—è—Ü. –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ 20-25¬∞C. –ó–∏–º–æ–≤–∫–∞ –ù–ï —Ç—Ä–µ–±—É–µ—Ç—Å—è!' }
        };

        // ==================== PWA –£–°–¢–ê–ù–û–í–ö–ê ====================
        function checkPWAStatus() {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∑–∞–ø—É—â–µ–Ω–æ –ª–∏ –∫–∞–∫ PWA
            const isStandalone = window.matchMedia('(display-mode: standalone)').matches;
            const isFullscreen = window.matchMedia('(display-mode: fullscreen)').matches;
            
            isPWAInstalled = isStandalone || isFullscreen || window.navigator.standalone;
            
            if (isPWAInstalled) {
                console.log('‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ –∫–∞–∫ PWA');
                document.getElementById('installButton').classList.remove('visible');
            }
            
            return isPWAInstalled;
        }

        // –°–æ–±—ã—Ç–∏–µ –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ PWA
        window.addEventListener('beforeinstallprompt', (e) => {
            console.log('‚úÖ beforeinstallprompt —Å—Ä–∞–±–æ—Ç–∞–ª - –º–æ–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å PWA');
            e.preventDefault();
            deferredPrompt = e;
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
            setTimeout(() => {
                if (!checkPWAStatus()) {
                    document.getElementById('installButton').classList.add('visible');
                }
            }, 3000);
        });

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –Ω–∞ –∫–Ω–æ–ø–∫—É —É—Å—Ç–∞–Ω–æ–≤–∫–∏
        document.getElementById('installButton').addEventListener('click', async () => {
            if (deferredPrompt) {
                // –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º —É—Å—Ç–∞–Ω–æ–≤–∫—É
                deferredPrompt.prompt();
                
                // –ñ–¥–µ–º –≤—ã–±–æ—Ä–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                const { outcome } = await deferredPrompt.userChoice;
                
                if (outcome === 'accepted') {
                    console.log('‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–∏–Ω—è–ª —É—Å—Ç–∞–Ω–æ–≤–∫—É PWA');
                    document.getElementById('installButton').classList.remove('visible');
                } else {
                    console.log('‚ùå –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫–∞–∑–∞–ª—Å—è –æ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ PWA');
                    showManualInstallInstructions();
                }
                
                deferredPrompt = null;
            } else {
                showManualInstallInstructions();
            }
        });

        // –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ PWA
        window.addEventListener('appinstalled', () => {
            console.log('üéâ PWA —É—Å–ø–µ—à–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ!');
            isPWAInstalled = true;
            document.getElementById('installButton').classList.remove('visible');
            
            // –ú–æ–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ
            setTimeout(() => {
                alert('–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ! –¢–µ–ø–µ—Ä—å –æ–Ω–æ –¥–æ—Å—Ç—É–ø–Ω–æ –Ω–∞ –≥–ª–∞–≤–Ω–æ–º —ç–∫—Ä–∞–Ω–µ.');
            }, 500);
        });

        // –ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è —Ä—É—á–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏
        function showManualInstallInstructions() {
            const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
            const isAndroid = /Android/.test(navigator.userAgent);
            
            let message = '';
            
            if (isIOS) {
                message = 
                    'üì± –î–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∞ iOS:\n' +
                    '1. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–ü–æ–¥–µ–ª–∏—Ç—å—Å—è" (–∫–≤–∞–¥—Ä–∞—Ç —Å–æ —Å—Ç—Ä–µ–ª–∫–æ–π –≤–≤–µ—Ä—Ö)\n' +
                    '2. –ü—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ –≤–Ω–∏–∑ –∏ –Ω–∞–∂–º–∏—Ç–µ "–ù–∞ —ç–∫—Ä–∞–Ω ¬´–î–æ–º–æ–π¬ª"\n' +
                    '3. –ù–∞–∂–º–∏—Ç–µ "–î–æ–±–∞–≤–∏—Ç—å" –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É';
            } else if (isAndroid) {
                message = 
                    'üì± –î–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∞ Android:\n' +
                    '1. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –º–µ–Ω—é (—Ç—Ä–∏ —Ç–æ—á–∫–∏ –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É)\n' +
                    '2. –í—ã–±–µ—Ä–∏—Ç–µ "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ" –∏–ª–∏ "–î–æ–±–∞–≤–∏—Ç—å –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω"\n' +
                    '3. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É';
            } else {
                message = 
                    'üì± –î–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:\n' +
                    '1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–µ–Ω—é –≤–∞—à–µ–≥–æ –±—Ä–∞—É–∑–µ—Ä–∞\n' +
                    '2. –ù–∞–π–¥–∏—Ç–µ –æ–ø—Ü–∏—é "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ" –∏–ª–∏ "–î–æ–±–∞–≤–∏—Ç—å –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω"\n' +
                    '3. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É';
            }
            
            alert(message);
        }

        // ==================== SERVICE WORKER ====================
        // –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º Service Worker
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª sw.js
                navigator.serviceWorker.register('sw.js', { scope: './' })
                    .then(registration => {
                        console.log('‚úÖ Service Worker –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω:', registration.scope);
                    })
                    .catch(error => {
                        console.log('‚ùå –û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ Service Worker:', error);
                    });
            });
        }

        // ==================== –õ–û–ì–ò–ö–ê –ö–ê–õ–ï–ù–î–ê–†–Ø ====================
        function getStorageKey() {
            return `messor_${currentDate.getFullYear()}_${currentDate.getMonth()}`;
        }

        function loadCompletedDays() {
            const stored = localStorage.getItem(getStorageKey());
            completedDays = stored ? JSON.parse(stored) : {};
        }

        function saveCompletedDays() {
            localStorage.setItem(getStorageKey(), JSON.stringify(completedDays));
        }

        function getTasks(day) {
            const tasks = ['üëÄ –û—Å–º–æ—Ç—Ä', 'üé® –ì–∏–ø—Å'];
            
            const date = new Date(currentDate.getFullYear(), currentDate.getMonth(), day);
            const dayOfWeek = date.getDay();
            const adjustedDay = dayOfWeek === 0 ? 6 : dayOfWeek - 1;
            
            // –£–≤–ª–∞–∂–Ω–µ–Ω–∏–µ –≥–∏–ø—Å–∞ - –∫–∞–∂–¥—ã–µ 10 –¥–Ω–µ–π
            if (day % 10 === 1) tasks.push('üí¶ 6–º–ª –≤–æ–¥—ã');
            
            // –°–µ–º–µ–Ω–∞ - –ø—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –∑–∞–ø–∞—Å–æ–≤ —Ä–∞–∑ –≤ 3-4 –¥–Ω—è
            if (day % 4 === 1) tasks.push('üåæ –°–µ–º–µ–Ω–∞');
            
            // –ë–µ–ª–æ–∫ 2-3 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é
            if ([1, 3, 5].includes(adjustedDay)) tasks.push('ü¶ó –ë–µ–ª–æ–∫');
            
            // –£–±–æ—Ä–∫–∞ –≤ —Å—É–±–±–æ—Ç—É
            if (adjustedDay === 5) tasks.push('üßπ –£–±–æ—Ä–∫–∞');
            
            return tasks;
        }

        function toggleDay(day) {
            const key = day.toString();
            completedDays[key] = !completedDays[key];
            saveCompletedDays();
            renderCalendar();
        }

        function changeMonth(delta) {
            currentDate.setMonth(currentDate.getMonth() + delta);
            loadCompletedDays();
            renderCalendar();
        }

        function resetMonth() {
            if (confirm('–°–±—Ä–æ—Å–∏—Ç—å –≤—Å–µ –æ—Ç–º–µ—Ç–∫–∏ –∑–∞ —ç—Ç–æ—Ç –º–µ—Å—è—Ü?')) {
                completedDays = {};
                saveCompletedDays();
                renderCalendar();
            }
        }

        function renderCalendar() {
            const calendar = document.getElementById('calendar');
            const monthDisplay = document.getElementById('currentMonth');
            const seasonInfo = document.getElementById('seasonalInfo');
            
            monthDisplay.textContent = `${monthNames[currentDate.getMonth()]} ${currentDate.getFullYear()}`;
            
            const info = seasonalInfo[currentDate.getMonth()];
            seasonInfo.innerHTML = `
                <h3>${info.icon} ${info.season}</h3>
                <p>${info.text}</p>
            `;
            
            calendar.innerHTML = '';
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–∫–∏ –¥–Ω–µ–π
            dayNames.forEach(name => {
                const header = document.createElement('div');
                header.className = 'day-header';
                header.textContent = name;
                calendar.appendChild(header);
            });
            
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–µ—Ä–≤—ã–π –¥–µ–Ω—å –º–µ—Å—è—Ü–∞
            const firstDay = new Date(currentDate.getFullYear(), currentDate.getMonth(), 1);
            let startDay = firstDay.getDay();
            startDay = startDay === 0 ? 6 : startDay - 1;
            
            // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –≤ –º–µ—Å—è—Ü–µ
            const daysInMonth = new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 0).getDate();
            
            // –î–æ–±–∞–≤–ª—è–µ–º –ø—É—Å—Ç—ã–µ —è—á–µ–π–∫–∏ –≤ –Ω–∞—á–∞–ª–µ
            for (let i = 0; i < startDay; i++) {
                const empty = document.createElement('div');
                empty.className = 'day-card empty';
                calendar.appendChild(empty);
            }
            
            // –î–æ–±–∞–≤–ª—è–µ–º –¥–Ω–∏ –º–µ—Å—è—Ü–∞
            const today = new Date();
            const isCurrentMonth = today.getMonth() === currentDate.getMonth() && 
                                  today.getFullYear() === currentDate.getFullYear();
            
            for (let day = 1; day <= daysInMonth; day++) {
                const dayCard = document.createElement('div');
                dayCard.className = 'day-card';
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–µ–≥–æ–¥–Ω—è—à–Ω–∏–π –¥–µ–Ω—å
                if (isCurrentMonth && day === today.getDate()) {
                    dayCard.classList.add('today');
                }
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏
                if (completedDays[day.toString()]) {
                    dayCard.classList.add('completed');
                }
                
                const tasks = getTasks(day);
                
                dayCard.innerHTML = `
                    <div class="day-number">${day}</div>
                    <div class="task-list">
                        ${tasks.map(task => `<div class="task-item">${task}</div>`).join('')}
                    </div>
                `;
                
                dayCard.onclick = () => toggleDay(day);
                calendar.appendChild(dayCard);
            }
        }

        // ==================== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ====================
        function init() {
            console.log('üöÄ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ');
            console.log('URL:', window.location.href);
            console.log('HTTPS:', window.location.protocol === 'https:');
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å PWA
            checkPWAStatus();
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ
            loadCompletedDays();
            renderCalendar();
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã URL
            if (window.location.search.includes('install')) {
                setTimeout(() => {
                    document.getElementById('installButton').click();
                }, 1000);
            }
        }

        // –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>

</html>
